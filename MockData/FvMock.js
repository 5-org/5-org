!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.FvMock=e():t.FvMock=e()}(this,(function(){return function(t){var e={};function n(s){if(e[s])return e[s].exports;var o=e[s]={exports:{},id:s,loaded:!1};return t[s].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}return n.m=t,n.c=e,n.p="",n(0)}([function(t,e,n){var s,o=n(3);"undefined"!=typeof window&&(s=n(3));var r={Util:o,XHR:s,heredoc:o.heredoc,setup:function(t){return s.setup(t)},_mocked:{},version:"1.0.1-beta3"};s&&(s.FvMock=r),r.mock=function(t,e,n){return s&&(window.XMLHttpRequest=s),r._mocked[t+(e||"")]={rurl:t,rtype:e,template:n},r},t.exports=r},function(t,e){var n={extend:function(){var t,e,s,o,r,i=arguments[0]||{},a=1,c=arguments.length;for(1===c&&(i=this,a=0);a<c;a++)if(t=arguments[a])for(e in t)s=i[e],i!==(o=t[e])&&void 0!==o&&(n.isArray(o)||n.isObject(o)?(n.isArray(o)&&(r=s&&n.isArray(s)?s:[]),n.isObject(o)&&(r=s&&n.isObject(s)?s:{}),i[e]=n.extend(r,o)):i[e]=o);return i},each:function(t,e,n){var s,o;if("number"===this.type(t))for(s=0;s<t;s++)e(s,s);else if(t.length===+t.length)for(s=0;s<t.length&&!1!==e.call(n,t[s],s,t);s++);else for(o in t)if(!1===e.call(n,t[o],o,t))break},type:function(t){return null==t?String(t):Object.prototype.toString.call(t).match(/\[object (\w+)\]/)[1].toLowerCase()}};n.each("String Object Array RegExp Function".split(" "),(function(t){n["is"+t]=function(e){return n.type(e)===t.toLowerCase()}})),n.noop=function(){},t.exports=n},function(t,e,n){t.exports=n(3)},function(t,e,n){var s=n(1);window._XMLHttpRequest=window.XMLHttpRequest,window._ActiveXObject=window.ActiveXObject;try{new window.Event("custom")}catch(t){window.Event=function(t,e,n,s){var o=document.createEvent("CustomEvent");return o.initCustomEvent(t,e,n,s),o}}var o={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},r="readystatechange loadstart progress abort error load timeout loadend".split(" "),i="timeout withCredentials".split(" "),a="readyState responseURL status statusText responseType response responseText responseXML".split(" "),c="OK";function u(){this.custom={events:{},requestHeaders:{},responseHeaders:{}}}u._settings={timeout:"10-100"},u.setup=function(t){return s.extend(u._settings,t),u._settings},s.extend(u,o),s.extend(u.prototype,o),u.prototype.mock=!0,u.prototype.match=!1,s.extend(u.prototype,{open:function(t,e,n,o,c){var p=this;s.extend(this.custom,{method:t,url:e,async:"boolean"!=typeof n||n,username:o,password:c,options:{url:e,type:t}}),this.custom.timeout=function(t){if("number"==typeof t)return t;if("string"==typeof t&&!~t.indexOf("-"))return parseInt(t,10);if("string"==typeof t&&~t.indexOf("-")){var e=t.split("-"),n=parseInt(e[0],10),s=parseInt(e[1],10);return Math.round(Math.random()*(s-n))+n}}(u._settings.timeout);var d=function(t){for(var e in u.FvMock._mocked){var n=u.FvMock._mocked[e];if((!n.rurl||o(n.rurl,t.url))&&(!n.rtype||o(n.rtype,t.type.toLowerCase())))return n}function o(t,e){return"string"===s.type(t)?t===e:"regexp"===s.type(t)?t.test(e):void 0}}(this.custom.options);function h(t){for(var e=0;e<a.length;e++)try{p[a[e]]=f[a[e]]}catch(t){}p.dispatchEvent(new Event(t.type))}if(d)this.match=!0,this.custom.template=d,this.readyState=u.OPENED,this.dispatchEvent(new Event("readystatechange"));else{var f=function(){var t=(e=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,n=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,s=location.href,o=n.exec(s.toLowerCase())||[],e.test(o[1]));var e,n,s,o;return window.ActiveXObject?!t&&r()||i():r();function r(){try{return new window._XMLHttpRequest}catch(t){}}function i(){try{return new window._ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}}();this.custom.xhr=f;for(var v=0;v<r.length;v++)f.addEventListener(r[v],h);o?f.open(t,e,n,o,c):f.open(t,e,n);for(var l=0;l<i.length;l++)try{f[i[l]]=p[i[l]]}catch(t){}}},setRequestHeader:function(t,e){if(this.match){var n=this.custom.requestHeaders;n[t]?n[t]+=","+e:n[t]=e}else this.custom.xhr.setRequestHeader(t,e)},timeout:0,withCredentials:!1,upload:{},send:function(t){var e=this;function n(){var t,n;e.readyState=u.HEADERS_RECEIVED,e.dispatchEvent(new Event("readystatechange")),e.readyState=u.LOADING,e.dispatchEvent(new Event("readystatechange")),e.status=200,e.statusText=c,e.response=e.responseText=JSON.stringify((t=e.custom.template,n=e.custom.options,s.isFunction(t.template)?t.template(n):u.FvMock.mock(t.template)),null,4),e.readyState=u.DONE,e.dispatchEvent(new Event("readystatechange")),e.dispatchEvent(new Event("load")),e.dispatchEvent(new Event("loadend"))}this.custom.options.body=t,this.match?(this.setRequestHeader("X-Requested-With","FvMockXMLHttpRequest"),this.dispatchEvent(new Event("loadstart")),this.custom.async?setTimeout(n,this.custom.timeout):n()):this.custom.xhr.send(t)},abort:function(){this.match?(this.readyState=u.UNSENT,this.dispatchEvent(new Event("abort",!1,!1,this)),this.dispatchEvent(new Event("error",!1,!1,this))):this.custom.xhr.abort()}}),s.extend(u.prototype,{responseURL:"",status:u.UNSENT,statusText:"",getResponseHeader:function(t){return this.match?this.custom.responseHeaders[t.toLowerCase()]:this.custom.xhr.getResponseHeader(t)},getAllResponseHeaders:function(){if(!this.match)return this.custom.xhr.getAllResponseHeaders();var t=this.custom.responseHeaders,e="";for(var n in t)t.hasOwnProperty(n)&&(e+=n+": "+t[n]+"\r\n");return e},overrideMimeType:function(){},responseType:"",response:null,responseText:"",responseXML:null}),s.extend(u.prototype,{addEventListener:function(t,e){var n=this.custom.events;n[t]||(n[t]=[]),n[t].push(e)},removeEventListener:function(t,e){for(var n=this.custom.events[t]||[],s=0;s<n.length;s++)n[s]===e&&n.splice(s--,1)},dispatchEvent:function(t){for(var e=this.custom.events[t.type]||[],n=0;n<e.length;n++)e[n].call(this,t);var s="on"+t.type;this[s]&&this[s](t)}}),t.exports=u}])}));