/**
 * FvMock - 拦截仿制服务器数据
 * 
 * @author Five
 * 2021.12.10
 * */ 
(function(m,h){"object"===typeof exports&&"object"===typeof module?module.exports=h():"function"===typeof define&&define.amd?define([],h):"object"===typeof exports?exports.FvMock=h():m.FvMock=h()})(this,function(){return function(m){function h(a){if(e[a])return e[a].exports;var f=e[a]={exports:{},id:a,loaded:!1};m[a].call(f.exports,f,f.exports,h);f.loaded=!0;return f.exports}var e={};h.m=m;h.c=e;h.p="";return h(0)}([function(m,h,e){h=e(3);var a;"undefined"!==typeof window&&(a=e(3));var f={Util:h,
	XHR:a,heredoc:h.heredoc,setup:function(n){return a.setup(n)},_mocked:{},version:"1.0.1-beta3"};a&&(a.FvMock=f);f.mock=function(n,g,k){ ;a&&(window.XMLHttpRequest=a);f._mocked[n+(g||"")]={rurl:n,rtype:g,template:k};return f};m.exports=f},function(m,h){var e={extend:function(){var a=arguments[0]||{},f=1,n=arguments.length,g,k,w;1===n&&(a=this,f=0);for(;f<n;f++)if(g=arguments[f])for(k in g){var r=a[k];var p=g[k];a!==p&&void 0!==p&&(e.isArray(p)||e.isObject(p)?(e.isArray(p)&&(w=r&&e.isArray(r)?
	r:[]),e.isObject(p)&&(w=r&&e.isObject(r)?r:{}),a[k]=e.extend(w,p)):a[k]=p)}return a},each:function(a,f,n){var g;if("number"===this.type(a))for(g=0;g<a;g++)f(g,g);else if(a.length===+a.length)for(g=0;g<a.length&&!1!==f.call(n,a[g],g,a);g++);else for(g in a)if(!1===f.call(n,a[g],g,a))break},type:function(a){return null===a||void 0===a?String(a):Object.prototype.toString.call(a).match(/\[object (\w+)\]/)[1].toLowerCase()}};e.each(["String","Object","Array","RegExp","Function"],function(a){e["is"+a]=
	function(f){return e.type(f)===a.toLowerCase()}});e.noop=function(){};m.exports=e},function(m,h,e){m.exports=e(3)},function(m,h,e){function a(){this.custom={events:{},requestHeaders:{},responseHeaders:{}}}function f(){function b(){try{return new window._XMLHttpRequest}catch(c){}}var d=function(){var c=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/.exec(location.href.toLowerCase())||[];return/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(c[1])}();if(window.ActiveXObject){if(!(d=!d&&
	b()))a:{try{d=new window._ActiveXObject("Microsoft.XMLHTTP");break a}catch(c){}d=void 0}}else d=b();return d}function n(b){function d(t,v){if("string"===k.type(t))return t===v;if("regexp"===k.type(t))return t.test(v)}for(var c in a.FvMock._mocked){var q=a.FvMock._mocked[c];if(!(q.rurl&&!d(q.rurl,b.url)||q.rtype&&!d(q.rtype,b.type.toLowerCase())))return q}}function g(b,d){return k.isFunction(b.template)?b.template(d):a.FvMock.mock(b.template)}var k=e(1);window._XMLHttpRequest=window.XMLHttpRequest;
	window._ActiveXObject=window.ActiveXObject;try{new window.Event("custom")}catch(b){window.Event=function(d,c,q,t){var v=document.createEvent("CustomEvent");v.initCustomEvent(d,c,q,t);return v}}h={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4};var w="readystatechange loadstart progress abort error load timeout loadend".split(" "),r=["timeout","withCredentials"],p="readyState responseURL status statusText responseType response responseText responseXML".split(" "),A={100:"Continue",101:"Switching Protocols",
	200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",300:"Multiple Choice",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",
	412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",422:"Unprocessable Entity",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported"};a._settings={timeout:"10-100"};a.setup=function(b){k.extend(a._settings,b);return a._settings};k.extend(a,h);k.extend(a.prototype,h);a.prototype.mock=
	!0;a.prototype.match=!1;k.extend(a.prototype,{open:function(b,d,c,q,t){function v(l){for(var u=0;u<p.length;u++)try{z[p[u]]=x[p[u]]}catch(B){}z.dispatchEvent(new Event(l.type))}var z=this;k.extend(this.custom,{method:b,url:d,async:"boolean"===typeof c?c:!0,username:q,password:t,options:{url:d,type:b}});this.custom.timeout=function(l){if("number"===typeof l)return l;if("string"===typeof l&&!~l.indexOf("-"))return parseInt(l,10);if("string"===typeof l&&~l.indexOf("-")){var u=l.split("-");l=parseInt(u[0],
	10);u=parseInt(u[1],10);return Math.round(Math.random()*(u-l))+l}}(a._settings.timeout);var y=n(this.custom.options);if(y)this.match=!0,this.custom.template=y,this.readyState=a.OPENED,this.dispatchEvent(new Event("readystatechange"));else{var x=f();this.custom.xhr=x;for(y=0;y<w.length;y++)x.addEventListener(w[y],v);q?x.open(b,d,c,q,t):x.open(b,d,c);for(b=0;b<r.length;b++)try{x[r[b]]=z[r[b]]}catch(l){}}},setRequestHeader:function(b,d){if(this.match){var c=this.custom.requestHeaders;c[b]=c[b]?c[b]+
	(","+d):d}else this.custom.xhr.setRequestHeader(b,d)},timeout:0,withCredentials:!1,upload:{},send:function(b){function d(){c.readyState=a.HEADERS_RECEIVED;c.dispatchEvent(new Event("readystatechange"));c.readyState=a.LOADING;c.dispatchEvent(new Event("readystatechange"));c.status=200;c.statusText=A[200];c.response=c.responseText=JSON.stringify(g(c.custom.template,c.custom.options),null,4);c.readyState=a.DONE;c.dispatchEvent(new Event("readystatechange"));c.dispatchEvent(new Event("load"));c.dispatchEvent(new Event("loadend"))}
	var c=this;this.custom.options.body=b;this.match?(this.setRequestHeader("X-Requested-With","FvMockXMLHttpRequest"),this.dispatchEvent(new Event("loadstart")),this.custom.async?setTimeout(d,this.custom.timeout):d()):this.custom.xhr.send(b)},abort:function(){this.match?(this.readyState=a.UNSENT,this.dispatchEvent(new Event("abort",!1,!1,this)),this.dispatchEvent(new Event("error",!1,!1,this))):this.custom.xhr.abort()}});k.extend(a.prototype,{responseURL:"",status:a.UNSENT,statusText:"",getResponseHeader:function(b){return this.match?
	this.custom.responseHeaders[b.toLowerCase()]:this.custom.xhr.getResponseHeader(b)},getAllResponseHeaders:function(){if(!this.match)return this.custom.xhr.getAllResponseHeaders();var b=this.custom.responseHeaders,d="",c;for(c in b)b.hasOwnProperty(c)&&(d+=c+": "+b[c]+"\r\n");return d},overrideMimeType:function(){},responseType:"",response:null,responseText:"",responseXML:null});k.extend(a.prototype,{addEventListener:function(b,d){var c=this.custom.events;c[b]||(c[b]=[]);c[b].push(d)},removeEventListener:function(b,
	d){b=this.custom.events[b]||[];for(var c=0;c<b.length;c++)b[c]===d&&b.splice(c--,1)},dispatchEvent:function(b){for(var d=this.custom.events[b.type]||[],c=0;c<d.length;c++)d[c].call(this,b);d="on"+b.type;if(this[d])this[d](b)}});m.exports=a}])});